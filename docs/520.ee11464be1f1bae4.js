"use strict";(self.webpackChunkportal=self.webpackChunkportal||[]).push([[520],{7520:(x,p,a)=>{a.r(p),a.d(p,{QuestionModule:()=>J});var l=a(9808),d=a(9319),m=a(1083),r=a(3075),f=a(9525),t=a(5e3),v=a(5514),O=a(7990),M=a(2290),c=a(7093),C=a(6928),g=a(7423);function P(o,i){if(1&o&&(t.ynx(0),t._UZ(1,"app-dynamic-form-field",5),t.BQk()),2&o){const e=i.$implicit;t.xp6(1),t.Q6J("formItem",e)}}let b=(()=>{class o{constructor(e,n,s,y,U,Y){this.fb=e,this.quesationService=n,this.listOfValuesService=s,this.activeRoute=y,this.toastr=U,this.router=Y}ngOnInit(){this.dynamicFormFields=[{id:"quesation",label:"Question",type:"text",defaultValue:{value:"",disabled:!1},validators:[r.kI.required]},{id:"description",label:"Description",type:"editor",defaultValue:{value:"",disabled:!1},validators:[]},{id:"categoryId",label:"Select Category",type:"select",selectMenuOptions:this.Category,defaultValue:{value:"",disabled:!1},validators:[r.kI.required]},{id:"certficationList",label:"Select Certificate",type:"select",selectMenuOptions:this.Certificate,defaultValue:{value:"",disabled:!1},validators:[r.kI.required],multiple:!0},{id:"isActive",label:"Is Active",type:"select",selectMenuOptions:[{key:"true",value:!0},{key:"false",value:!1}],defaultValue:{value:"",disabled:!1},validators:[r.kI.required]}],this.createForm(),this.getIdFromUrl()}get Category(){let e=[];return this.listOfValuesService.getCategories().subscribe(n=>{e.push(...n)}),e}get Certificate(){let e=[];return this.listOfValuesService.getCertifcates().subscribe(n=>{e.push(...n)}),e}createForm(){this.myForm=this.fb.group({}),this.dynamicFormFields.forEach(e=>{const n=this.fb.control(Object.assign({},e.defaultValue),e.validators);this.myForm.addControl(e.id,n)})}getIdFromUrl(){const e=this.activeRoute.snapshot.paramMap.get("id");e?(this.formMode=f.h.Edit,this.getItemById(e)):this.formMode=f.h.Add}getItemById(e){this.quesationService.get(e).subscribe(n=>{this.myForm.patchValue(n)})}saveData(){if(this.myForm.invalid)return;const e=this.myForm.value;this.formMode===f.h.Add?this.addQuestion(e):this.updateQuestion(e)}addQuestion(e){this.quesationService.add(e).subscribe(()=>{this.actionAfterAddOrUpdate("added")})}updateQuestion(e){this.quesationService.update(e).subscribe(()=>{this.actionAfterAddOrUpdate("updated")})}actionAfterAddOrUpdate(e){this.myForm.reset(),this.toastr.success(`Question ${e} successfully`),this.router.navigate(["/question"])}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(r.qu),t.Y36(v.$),t.Y36(O.j),t.Y36(m.gz),t.Y36(M._W),t.Y36(m.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-control"]],decls:6,vars:4,consts:[[1,"wrap-form"],["fxLayout","column","fxLayoutGap","0px",1,"form",3,"formGroup"],[4,"ngFor","ngForOf"],[1,"form-buttons"],["mat-button","","type","button",3,"disabled","click"],[3,"formItem"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"form",1),t.YNc(2,P,2,1,"ng-container",2),t.TgZ(3,"div",3)(4,"button",4),t.NdJ("click",function(){return n.saveData()}),t._uU(5),t.qZA()()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",n.myForm),t.xp6(1),t.Q6J("ngForOf",n.dynamicFormFields),t.xp6(2),t.Q6J("disabled",n.myForm.invalid),t.xp6(1),t.hij(" ",n.formMode," "))},directives:[r._Y,r.JL,c.xw,c.SQ,r.sg,l.sg,C.q,g.lW],styles:[".wrap-form[_ngcontent-%COMP%]{margin-block:3rem}.wrap-form[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{width:80%;margin:0 auto}.wrap-form[_ngcontent-%COMP%]   .form-buttons[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%]{padding:5px;border-radius:10px;background-color:#454545;color:#ffe5e5}"]}),o})();var A=a(9965);function w(o,i){if(1&o&&(t.ynx(0),t._UZ(1,"app-dynamic-form-field",5),t.BQk()),2&o){const e=i.$implicit;t.xp6(1),t.Q6J("formItem",e)}}function Q(o,i){if(1&o&&(t.ynx(0),t._UZ(1,"app-dynamic-form-field",5),t.BQk()),2&o){const e=i.$implicit;t.xp6(1),t.Q6J("formItem",e)}}let I=(()=>{class o{constructor(e,n){this.activeRoute=e,this.fb=n}ngOnInit(){this.getIdFromParams(),this.question=this.getQuestionById(this.id),this.questionFormFields=[{id:"name",label:"Name",type:"text",defaultValue:{value:"",disabled:!0},validators:[]},{id:"email",label:"Email",type:"email",defaultValue:{value:"",disabled:!0},validators:[]},{id:"question",label:"Question",type:"textarea",defaultValue:{value:"",disabled:!0},rows:7,validators:[]}],this.replyFormFields=[{id:"replyName",label:"Name",type:"text",defaultValue:{value:"",disabled:!1},validators:[r.kI.required]},{id:"replyEmail",label:"Email",type:"email",defaultValue:{value:"",disabled:!1},validators:[r.kI.required,r.kI.email]},{id:"reply",label:"Reply",type:"textarea",defaultValue:{value:"",disabled:!1},validators:[r.kI.required]}],this.createQuestionForm(),this.createReplyForm(),this.questionForm.patchValue(this.question)}getIdFromParams(){this.activeRoute.queryParams.subscribe(e=>this.id=e.id)}getQuestionById(e){return{name:"Ahmed mohamed",email:"ahmedmohamed@gmail.com",question:"What is the best way to learn Angular?"}}createReplyForm(){this.replyForm=this.fb.group({}),this.createForm(this.replyFormFields,this.replyForm)}createQuestionForm(){this.questionForm=this.fb.group({}),this.createForm(this.questionFormFields,this.questionForm)}createForm(e,n){e.forEach(s=>{const y=this.fb.control(Object.assign({},s.defaultValue),s.validators);n.addControl(s.id,y)})}sendReply(){this.replyForm.markAllAsTouched()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.gz),t.Y36(r.qu))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-reply"]],decls:8,vars:4,consts:[[1,"wrap-form"],["fxLayout","column","fxLayoutGap","0px",1,"form",3,"formGroup"],[4,"ngFor","ngForOf"],[1,"form-buttons"],["mat-button","","type","button",3,"click"],[3,"formItem"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"form",1),t.YNc(2,w,2,1,"ng-container",2),t.qZA(),t.TgZ(3,"form",1),t.YNc(4,Q,2,1,"ng-container",2),t.TgZ(5,"div",3)(6,"button",4),t.NdJ("click",function(){return n.sendReply()}),t._uU(7,"Reply"),t.qZA()()()()),2&e&&(t.xp6(1),t.Q6J("formGroup",n.questionForm),t.xp6(1),t.Q6J("ngForOf",n.questionFormFields),t.xp6(1),t.Q6J("formGroup",n.replyForm),t.xp6(1),t.Q6J("ngForOf",n.replyFormFields))},directives:[r._Y,r.JL,c.xw,c.SQ,r.sg,l.sg,C.q,g.lW],styles:[".wrap-form[_ngcontent-%COMP%]{margin-block:3rem}.wrap-form[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]{width:80%;margin:0 auto}.wrap-form[_ngcontent-%COMP%]   .form-buttons[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%]{padding:5px;border-radius:10px;background-color:#454545;color:#ffe5e5}"]}),o})();var q=a(1060),F=a(7994),h=a(9224);function _(o,i){if(1&o&&(t.TgZ(0,"mat-card",10)(1,"mat-card-subtitle"),t._uU(2),t.qZA(),t.TgZ(3,"mat-card-actions",11)(4,"button",12),t._uU(5),t.qZA()()()),2&o){const e=i.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(3),t.hij(" ",e.description," ")}}function V(o,i){}let R=(()=>{class o{constructor(e,n){this.activeRoute=e,this.quesationService=n}ngOnInit(){this.getIdFromUrl()}getIdFromUrl(){this.id=this.activeRoute.snapshot.paramMap.get("id"),this.id&&(this.getDetails(),this.loadCerticateComponent())}getDetails(){this.quesationService.get(this.id).subscribe(e=>{this.name=e.quesation,this.description=e.description})}loadCerticateComponent(){const e=this.dynamicChild.createComponent(q.I);e.instance.id=this.id,e.instance.routerName="certificate",e.instance.apiToGetListById="GetListByQuesation"}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(m.gz),t.Y36(v.$))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-view"]],viewQuery:function(e,n){if(1&e&&t.Gf(F.$,7,t.s_b),2&e){let s;t.iGM(s=t.CRH())&&(n.dynamicChild=s.first)}},decls:12,vars:3,consts:[["fxLayout","column","fxLayoutAlign","start",1,"wrap"],[1,"header"],["fxLayout","column",1,"content"],[1,"title"],["fxLayout","row"],["fxFlex","60%"],["fxLayout","row wrap",1,"warp-card"],["class","card","fxFlex.sm","34%","fxFlex.xs","80%","fxLayout","column","fxLayoutAlign","space-between start",4,"ngFor","ngForOf"],["id","certificate"],["appLoader",""],["fxFlex.sm","34%","fxFlex.xs","80%","fxLayout","column","fxLayoutAlign","space-between start",1,"card"],["fxLayout","row","fxLayoutAlign","space-between center"],["mat-button","",1,"disabled-btn"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p",3),t._uU(4),t.qZA(),t.TgZ(5,"div",4)(6,"span",5),t._uU(7),t.qZA()()()(),t.TgZ(8,"div",6),t.YNc(9,_,6,2,"mat-card",7),t.qZA(),t.TgZ(10,"div",8),t.YNc(11,V,0,0,"ng-template",9),t.qZA()()),2&e&&(t.xp6(4),t.Oqu(n.name||"question Name"),t.xp6(3),t.hij(" ",n.description||"description"," "),t.xp6(2),t.Q6J("ngForOf",n.info))},directives:[c.xw,c.Wh,c.yH,l.sg,h.a8,h.$j,h.hq,g.lW,F.$],styles:[".wrap[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background-color:#d6d6d6;margin-bottom:10px}.wrap[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:90%;margin:auto;padding-block:2rem;padding-inline:1rem}.wrap[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.wrap[_ngcontent-%COMP%]   .warp-card[_ngcontent-%COMP%]{justify-content:center}.wrap[_ngcontent-%COMP%]   .warp-card[_ngcontent-%COMP%]   .mat-card[_ngcontent-%COMP%]{min-width:200px;border-radius:10px;background-color:#d6d6d6;color:#242424;margin:5px;width:max-content;padding:20px 10px}.wrap[_ngcontent-%COMP%]   .warp-card[_ngcontent-%COMP%]   .mat-card[_ngcontent-%COMP%]   .mat-card-actions[_ngcontent-%COMP%]{display:flex}.wrap[_ngcontent-%COMP%]   .warp-card[_ngcontent-%COMP%]   .mat-card[_ngcontent-%COMP%]   .mat-card-actions[_ngcontent-%COMP%]   .disabled-btn[_ngcontent-%COMP%]{cursor:text}.wrap[_ngcontent-%COMP%]   .warp-card[_ngcontent-%COMP%]   .mat-card[_ngcontent-%COMP%]   .mat-card-actions[_ngcontent-%COMP%]   .continue[_ngcontent-%COMP%]{background-color:#fff;border-radius:15px}"]}),o})();var u=a(8933);const T=[{path:"",component:A.H,canActivate:[u.W],data:{role:[d.G.Admin]}},{path:"create",component:b,canActivate:[u.W],data:{role:[d.G.Admin]}},{path:"edit/:id",component:b,canActivate:[u.W],data:{role:[d.G.Admin]}},{path:"reply/:id",component:I,canActivate:[u.W],data:{role:[d.G.Admin]}},{path:"view/:id",component:R,canActivate:[u.W],data:{role:[d.G.Admin]}}];let Z=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[m.Bz.forChild(T)],m.Bz]}),o})();var L=a(6213);let J=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[l.ez,Z,L.m]]}),o})()},9525:(x,p,a)=>{a.d(p,{h:()=>l});var l=(()=>{return(d=l||(l={})).Add="Add",d.Edit="Update",l;var d})()}}]);