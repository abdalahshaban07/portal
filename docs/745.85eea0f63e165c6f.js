"use strict";(self.webpackChunkportal=self.webpackChunkportal||[]).push([[745],{5745:(Ut,w,a)=>{a.r(w),a.d(w,{ViewModule:()=>Dt});var q=a(6213),p=a(9808),g=a(1083),t=a(5e3),h=a(5514),y=a(9957),d=a(7093);let F=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-question"]],inputs:{question:"question"},decls:7,vars:2,consts:[[1,"wrap"],[1,"question-title"],[1,"question-note"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"p"),t._uU(3),t.qZA()(),t.TgZ(4,"div",2)(5,"p"),t._uU(6),t.qZA()()()),2&e&&(t.xp6(3),t.hij("-",o.question.quesation,""),t.xp6(3),t.hij(" ",o.question.description||"No description"," "))},styles:[".wrap[_ngcontent-%COMP%]{display:flex;flex-direction:column}.question-title[_ngcontent-%COMP%]{color:#f4b027;font-weight:700;line-height:40px;font-size:1.4rem;padding:1rem}.question-note[_ngcontent-%COMP%], .question-content[_ngcontent-%COMP%]{font-size:14px}.question-note[_ngcontent-%COMP%]{padding-inline:1rem}"]}),n})();var A=a(520),H=a(9913),T=a(6739),J=a(4004);let N=(()=>{class n extends H.z{constructor(e){super(e),this.injector=e}getResourceUrl(){return"QuesationAnswer"}transform(e){let i=e.data.totalCount,s=[];return e.data.dataList.forEach(r=>{let m={id:r.id,projectId:r.projectId,answer:r.answer,clientUserCreateBy:r.clientUserCreateBy,consultentCreateBy:r.consultentCreateBy,documentName:r.answerDocs.map(l=>l.documentName).flatMap(l=>l),imagePath:r.answerDocs.map(l=>l.imagePath).flatMap(l=>l)};s.push(m)}),{data:{dataList:s,totalCount:i}}}getItemBy(e=T.a.pageNumber,o=T.a.pageSize,i,s){let r=(new A.LE).set("id",i.toString()).set("pageNum",e.toString()).set("pagSize",o.toString());return this.injector.get(A.eN).get(`${this.APIUrl}/${s}?${r.toString()}`).pipe((0,J.U)(m=>this.transform(m)))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(t.zs3))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var S=a(8853),Y=a(5981),L=a(1758),Z=a(6059),x=a(7423),M=a(5245),I=a(3322),f=a(7322),P=a(7531),u=a(4999),O=a(4847),D=a(7446),U=a(7871),j=a(5618),R=a(2274);function $(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",18),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).createPage()}),t.TgZ(1,"mat-icon"),t._uU(2,"create_new_folder"),t.qZA(),t._uU(3),t.qZA()}if(2&n){const e=t.oxw(2);t.xp6(3),t.hij(" Create New ",e.name," ")}}function B(n,c){if(1&n&&(t.TgZ(0,"div",16),t.YNc(1,$,4,1,"button",17),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.hasCreateButton)}}function G(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"mat-icon",22),t.NdJ("click",function(){return t.CHM(e),t.oxw(3).createPage()}),t._uU(1,"add"),t.qZA()}}function E(n,c){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,G,2,0,"mat-icon",21),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.hasIconAdd)}}const k=function(n){return[n]};function V(n,c){if(1&n&&(t.TgZ(0,"span",19),t._uU(1),t.YNc(2,E,2,1,"span",20),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.hij("",e.name," "),t.xp6(1),t.Q6J("appHasRole",t.VKq(2,k,e.Roles.Admin))}}function z(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",23)(1,"mat-form-field",24)(2,"mat-icon",25),t._uU(3,"search"),t.qZA(),t.TgZ(4,"mat-label"),t._uU(5,"Search"),t.qZA(),t.TgZ(6,"input",26),t.NdJ("keyup",function(i){return t.CHM(e),t.oxw().applyFilter(i)}),t.qZA()()()}}function X(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"mat-header-cell",30)(1,"mat-checkbox",31),t.NdJ("change",function(i){t.CHM(e);const s=t.oxw(2);return i?s.masterToggle():null}),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("checked",e.selection.hasValue()&&e.isAllSelected())("indeterminate",e.selection.hasValue()&&!e.isAllSelected())("aria-label",e.checkboxLabel())}}function W(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"mat-cell",30)(1,"mat-checkbox",32),t.NdJ("click",function(i){return i.stopPropagation()})("change",function(i){const r=t.CHM(e).$implicit,m=t.oxw(2);return i?m.selection.toggle(r):null}),t.qZA()()}if(2&n){const e=c.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("checked",o.selection.isSelected(e))("aria-label",o.checkboxLabel(e))}}function K(n,c){1&n&&(t.ynx(0,27),t.YNc(1,X,2,3,"mat-header-cell",28),t.YNc(2,W,2,2,"mat-cell",29),t.BQk())}function tt(n,c){if(1&n&&(t.TgZ(0,"mat-header-cell",36),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit;t.Q6J("fxFlex","ID"===e.header?"10%":"50%"),t.xp6(1),t.hij(" ",e.header," ")}}function et(n,c){if(1&n&&(t.TgZ(0,"span")(1,"span")(2,"mat-icon"),t._uU(3,"circle"),t.qZA()()()),2&n){const e=t.oxw().$implicit,o=t.oxw().$implicit;t.xp6(1),t.Tol(o.cell(e))}}function nt(n,c){if(1&n&&(t.TgZ(0,"span"),t._UZ(1,"app-avatar",41),t.qZA()),2&n){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("avatar",null==e?null:e.avatar)}}function ot(n,c){if(1&n&&(t.TgZ(0,"span")(1,"a",43)(2,"mat-icon"),t._uU(3,"attach_file"),t.qZA()()()),2&n){const e=c.$implicit;t.xp6(1),t.Q6J("href","http://mahmoud11prosmar-001-site1.itempurl.com"+e,t.LSH)}}function ct(n,c){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,ot,4,1,"span",42),t.qZA()),2&n){const e=t.oxw().$implicit,o=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",o.cell(e))}}function it(n,c){if(1&n&&(t.TgZ(0,"span")(1,"a",43)(2,"mat-icon"),t._uU(3,"attach_file"),t.qZA()()()),2&n){const e=t.oxw().$implicit,o=t.oxw().$implicit;t.xp6(1),t.Q6J("href","http://mahmoud11prosmar-001-site1.itempurl.com"+o.cell(e),t.LSH)}}function at(n,c){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.ALo(2,"date"),t.qZA()),2&n){const e=t.oxw().$implicit,o=t.oxw().$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,o.cell(e),"d/M/yy, h:mm a")," ")}}function rt(n,c){if(1&n&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&n){const e=t.oxw().$implicit,o=t.oxw().$implicit;t.xp6(1),t.hij(" ",o.cell(e)," ")}}const st=function(n){return{cursor:n}};function lt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"mat-cell",37),t.NdJ("click",function(){const s=t.CHM(e).$implicit,r=t.oxw(2);return r.rowClicked?r.getRecord(s):null}),t.TgZ(1,"span",38),t.YNc(2,et,4,2,"span",39),t.YNc(3,nt,2,1,"span",39),t.YNc(4,ct,2,1,"span",39),t.YNc(5,it,4,1,"span",39),t.YNc(6,at,3,4,"span",39),t.YNc(7,rt,2,1,"span",40),t.qZA()()}if(2&n){const e=t.oxw().$implicit,o=t.oxw();t.Q6J("fxFlex","ID"===e.header?"10%":"50%")("ngStyle",t.VKq(8,st,o.rowClicked?"pointer":"default")),t.xp6(1),t.Q6J("ngSwitch",e.type),t.xp6(1),t.Q6J("ngSwitchCase",o.typeColumn.icon),t.xp6(1),t.Q6J("ngSwitchCase",o.typeColumn.avatar),t.xp6(1),t.Q6J("ngSwitchCase",o.typeColumn.fileArray),t.xp6(1),t.Q6J("ngSwitchCase",o.typeColumn.file),t.xp6(1),t.Q6J("ngSwitchCase",o.typeColumn.date)}}function mt(n,c){1&n&&(t.ynx(0,33),t.YNc(1,tt,2,2,"mat-header-cell",34),t.YNc(2,lt,8,10,"mat-cell",35),t.BQk()),2&n&&t.Q6J("matColumnDef",c.$implicit.columnDef)}function pt(n,c){1&n&&(t.TgZ(0,"mat-header-cell",47),t._uU(1,"Action"),t.qZA())}function dt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"mat-cell",48),t.NdJ("buttonAction",function(i){return t.CHM(e),t.oxw(2).onTableAction(i)}),t.qZA()}if(2&n){const e=c.$implicit,o=t.oxw(2);t.Q6J("value",e)("actions",o.actionsBtn)}}function ut(n,c){1&n&&(t.ynx(0,44),t.YNc(1,pt,2,0,"mat-header-cell",45),t.YNc(2,dt,1,2,"mat-cell",46),t.BQk())}function _t(n,c){1&n&&t._UZ(0,"mat-header-row")}function gt(n,c){1&n&&t._UZ(0,"mat-row")}function ft(n,c){if(1&n&&(t.TgZ(0,"tr")(1,"td",49),t._uU(2),t.qZA()()),2&n){const e=t.oxw();t.xp6(2),t.hij("No ",e.name," Found!")}}const ht=function(n,c){return{width:n,"max-height":c}};let xt=(()=>{class n extends S.C{constructor(e){super(e),this.injector=e,this.columns=[{columnDef:"id",header:"ID",cell:o=>`${o.id}`},{columnDef:"answer",header:"Answer",cell:o=>`${o.answer}`},{columnDef:"clientUserCreateBy",header:"User",cell:o=>`${o.clientUserCreateBy||""}`},{columnDef:"consultentCreateBy",header:"Consultent",cell:o=>`${o.consultentCreateBy||""}`},{columnDef:"imagePath",header:"File Path",type:L.i.fileArray,cell:o=>o.imagePath.map(i=>i).flatMap(i=>i)},{columnDef:"documentName",header:"Document Name",cell:o=>o.documentName.map(i=>`[${i.split(".")[0].substring(30)+"."+i.split(".")[1]}]\n`)}],this.quesationService=this.injector.get(h.$)}set historyId(e){this.id=e}ngOnInit(){this.haveActions=!1,this.hasSearch=!1,this.apiToGetListById="GetAllAnswersAndDocsByLineId",super.ngOnInitC()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(t.zs3))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-acceptance-history"]],inputs:{historyId:"historyId",inputId:"inputId"},features:[t._Bn([{provide:Y.X,useExisting:N}]),t.qOj],decls:17,vars:18,consts:[["fxLayout","column","fxLayoutAlign","start",1,"wrap"],["class","create-btn",4,"appHasRole"],["fxLayout","column","ngClass.lt-md","table-wrap_xs",1,"table-wrap",3,"ngStyle"],["class","table-name",4,"ngIf"],[1,"table-actionbar"],["class","search-box",4,"ngIf"],[1,"table-data"],["matSort","","fxLayout","column",3,"dataSource"],["matColumnDef","select",4,"ngIf"],[3,"matColumnDef",4,"ngFor","ngForOf"],["matColumnDef","action",4,"ngIf"],[4,"matHeaderRowDef","matHeaderRowDefSticky"],[4,"matRowDef","matRowDefColumns"],[1,"no-record"],[4,"ngIf"],[3,"length","pagenatior"],[1,"create-btn"],["mat-button","",3,"click",4,"ngIf"],["mat-button","",3,"click"],[1,"table-name"],[4,"appHasRole"],[3,"click",4,"ngIf"],[3,"click"],[1,"search-box"],["appearance","outline",1,"example-form-field"],["matPrefix",""],["matInput","","type","text",3,"keyup"],["matColumnDef","select"],["fxFlex","10%",4,"matHeaderCellDef"],["fxFlex","10%",4,"matCellDef"],["fxFlex","10%"],[3,"checked","indeterminate","aria-label","change"],[3,"checked","aria-label","click","change"],[3,"matColumnDef"],["mat-sort-header","","fxLayoutAlign","start center",3,"fxFlex",4,"matHeaderCellDef"],["fxLayoutAlign","start center",3,"fxFlex","ngStyle","click",4,"matCellDef"],["mat-sort-header","","fxLayoutAlign","start center",3,"fxFlex"],["fxLayoutAlign","start center",3,"fxFlex","ngStyle","click"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"avatar"],[4,"ngFor","ngForOf"],["target","_blank","rel","noopener noreferrer",3,"href"],["matColumnDef","action"],["fxFlex","7%",4,"matHeaderCellDef"],["action-buttons","","fxFlex","7%",3,"value","actions","buttonAction",4,"matCellDef"],["fxFlex","7%"],["action-buttons","","fxFlex","7%",3,"value","actions","buttonAction"],[2,"text-align","center"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,B,2,1,"div",1),t.TgZ(2,"div")(3,"div",2),t.YNc(4,V,3,4,"span",3),t.TgZ(5,"div",4),t.YNc(6,z,7,0,"div",5),t.qZA(),t.TgZ(7,"div",6)(8,"mat-table",7),t.YNc(9,K,3,0,"ng-container",8),t.YNc(10,mt,3,1,"ng-container",9),t.YNc(11,ut,3,0,"ng-container",10),t.YNc(12,_t,1,0,"mat-header-row",11),t.YNc(13,gt,1,0,"mat-row",12),t.qZA(),t.TgZ(14,"table",13),t.YNc(15,ft,3,1,"tr",14),t.qZA()(),t.TgZ(16,"app-paginator",15),t.NdJ("pagenatior",function(s){return o.onPageChange(s)}),t.qZA()()()()),2&e&&(t.xp6(1),t.Q6J("appHasRole",t.VKq(13,k,o.Roles.Admin)),t.xp6(2),t.Q6J("ngStyle",t.WLB(15,ht,o.width,o.height)),t.xp6(1),t.Q6J("ngIf",o.hasName),t.xp6(2),t.Q6J("ngIf",o.hasSearch),t.xp6(2),t.Q6J("dataSource",o.dataSource),t.xp6(1),t.Q6J("ngIf",o.haveSelect),t.xp6(1),t.Q6J("ngForOf",o.columns),t.xp6(1),t.Q6J("ngIf",o.haveActions),t.xp6(1),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("ngIf",!o.dataSource.data.length),t.xp6(1),t.Q6J("length",o.length))},directives:[d.xw,d.Wh,Z.c,p.O5,x.lW,M.Hw,I.oO,p.PC,I.Zl,f.KE,f.qo,f.hX,P.Nt,u.BZ,O.YE,u.w1,u.fO,u.ge,d.yH,D.oG,u.Dz,u.ev,p.sg,O.nU,p.RF,p.n9,U.A,p.ED,j.O,u.as,u.XQ,u.nj,u.Gk,R.J],pipes:[p.uU],styles:[".wrap[_ngcontent-%COMP%]{width:90%;margin:auto;margin-block:1rem}.wrap[_ngcontent-%COMP%]   .create-btn[_ngcontent-%COMP%]{margin-bottom:1rem}.wrap[_ngcontent-%COMP%]   .create-btn[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%]{border-radius:20px;background-color:#454545;padding:13px;color:#fff}.table-wrap_xs[_ngcontent-%COMP%]{width:100%}.table-name[_ngcontent-%COMP%]{font-size:1.5em;font-weight:700;color:#242424;text-transform:uppercase;margin-block:1rem;display:flex;align-items:flex-end}.table-name[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:2rem}.table-data[_ngcontent-%COMP%]{position:relative}.no-record[_ngcontent-%COMP%]{display:flex;justify-content:center;line-height:40px;font-size:2rem}.no-record[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{margin-block:1rem}.mat-header-row[_ngcontent-%COMP%]{background-color:#242424;border-radius:15px}.mat-header-row[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]{color:#fff}.mat-header-row[_ngcontent-%COMP%]   .mat-header-cell[_ngcontent-%COMP%]     .mat-sort-header-arrow{color:#fff}  .mat-checkbox-checked.mat-accent .mat-checkbox-background,   .mat-checkbox-checked.mat-accent .mat-checkbox-indeterminate.mat-accent .mat-checkbox-background{background-color:#f4b027}  .mat-checkbox.mat-accent .mat-checkbox-ripple .mat-ripple-element{background-color:#f4b027!important}  .mat-checkbox-indeterminate.mat-accent .mat-checkbox-background, .mat-checkbox-checked.mat-accent[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%]{background-color:#f4b027}  .mat-checkbox-inner-container{height:25px!important;width:25px!important;border-radius:3px;background:white}  .mat-cell{cursor:pointer}.active[_ngcontent-%COMP%]{color:#31b965}.waiting[_ngcontent-%COMP%]{color:#f4b027}.not_active[_ngcontent-%COMP%]{color:#db1c1c}"]}),n})();var _=a(3075),Ct=a(9319),C=a(7230);let vt=(()=>{class n{constructor(e,o){this.router=e,this.route=o}reloadComponent(e,o){this.router.navigate([`/${e?this.router.url:o}`],{skipLocationChange:!0,queryParamsHandling:"preserve"}).then(()=>{console.log(`After navigation I am on:${this.router.url}`)})}reloadPage(){window.location.reload()}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(g.F0),t.LFG(g.gz))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var v=a(6688);function bt(n,c){1&n&&(t.TgZ(0,"mat-error"),t._uU(1," This field is required "),t.qZA())}function wt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"mat-chip-list")(1,"mat-chip"),t._uU(2),t.TgZ(3,"mat-icon",17),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index;return t.oxw(2).removeFileByIndex(i)}),t._uU(4,"delete"),t.qZA()()()}if(2&n){const e=t.oxw().$implicit;t.xp6(2),t.hij(" ",null==e?null:e.name," ")}}function yt(n,c){if(1&n&&(t.TgZ(0,"div"),t.YNc(1,wt,5,1,"mat-chip-list",10),t.qZA()),2&n){const e=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.selectedFile.length)}}function At(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"div",6)(1,"form",7)(2,"mat-form-field",8),t._UZ(3,"textarea",9),t.YNc(4,bt,2,0,"mat-error",10),t.qZA(),t.TgZ(5,"div",11)(6,"button",12),t.NdJ("click",function(){return t.CHM(e),t.MAs(12).click()}),t.TgZ(7,"mat-icon"),t._uU(8,"cloud_upload"),t.qZA(),t.TgZ(9,"span"),t._uU(10,"Upload File"),t.qZA(),t.TgZ(11,"input",13,14),t.NdJ("change",function(i){return t.CHM(e),t.oxw().onFileSelected(i)}),t.qZA()(),t.TgZ(13,"div",15),t.YNc(14,yt,2,1,"div",16),t.qZA()()()()}if(2&n){const e=t.oxw();let o;t.xp6(1),t.Q6J("formGroup",e.form),t.xp6(3),t.Q6J("ngIf",null==(o=e.form.get("comment"))?null:o.hasError("required")),t.xp6(10),t.Q6J("ngForOf",e.selectedFile)}}function Tt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",19),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).acceptQuestion()}),t._uU(1," Accept "),t.qZA()}}function Zt(n,c){if(1&n&&(t.TgZ(0,"span"),t.YNc(1,Tt,2,0,"button",18),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",!e.addComment)}}function Mt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){return t.CHM(e),t.oxw().addCommentToggle()}),t._uU(1," Add Comment "),t.qZA()}}function It(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){return t.CHM(e),t.oxw().cancelConfirm()}),t._uU(1," Cancel "),t.qZA()}}function Pt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"button",21),t.NdJ("click",function(){return t.CHM(e),t.oxw().confirmComment()}),t._uU(1," Confirm "),t.qZA()}if(2&n){const e=t.oxw();t.Q6J("disabled",e.form.invalid)}}const Ot=function(n){return[n]};let kt=(()=>{class n{constructor(e,o,i,s,r,m,l){this.fb=e,this.projectService=o,this.quesationService=i,this.router=s,this.route=r,this.location=m,this.reloadComponentService=l,this.addComment=!1,this.Roles=Ct.G}ngOnInit(){this.createForm()}createForm(){this.form=this.fb.group({comment:["",[_.kI.required]],file:["",[_.kI.required]]})}onFileSelected(e){var o;let i=e.target.files;i&&i.length>0&&(this.selectedFile=[...i],null===(o=this.form.get("file"))||void 0===o||o.setValue(i))}removeFileByIndex(e){this.selectedFile.splice(e,1)}addCommentToggle(){this.addComment=!0}acceptQuestion(){this.projectService.acceptQuestion(this.lineId).subscribe(e=>{this.goBack()})}confirmComment(){this.form.invalid||(this.addComment=!1,this.quesationService.addCommentToQuestion({id:this.lineId,Answer:this.form.value.comment,Attachments:this.selectedFile}).subscribe(o=>this.reloadPage()))}cancelConfirm(){this.addComment=!1,this.form.reset()}reloadPage(){this.router.routeReuseStrategy.shouldReuseRoute=()=>!1,this.router.onSameUrlNavigation="reload",this.router.navigate(["./"],{relativeTo:this.route,queryParamsHandling:"preserve",skipLocationChange:!0})}goBack(){this.location.back()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(_.qu),t.Y36(C.Y),t.Y36(h.$),t.Y36(g.F0),t.Y36(g.gz),t.Y36(p.Ye),t.Y36(vt))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-comment"]],inputs:{questionId:"questionId",lineId:"lineId"},exportAs:["add-comment"],decls:7,vars:7,consts:[[1,"wrap"],["class","form-wrap",4,"ngIf"],["fxLayout","row","fxLayoutGap","20px",1,"acceptance-btn-actions"],[4,"appHasRole"],["mat-button","","class","btn-add-comment",3,"click",4,"ngIf"],["mat-button","","class","btn-confirm",3,"disabled","click",4,"ngIf"],[1,"form-wrap"],["fxLayout","column",3,"formGroup"],["appearance","fill"],["formControlName","comment","matInput","","placeholder","If Not accepted Tell why!","rows","5"],[4,"ngIf"],["fxLayout","row",1,"file-input"],["mat-button","",3,"click"],["type","file","formControlName","file","multiple","",2,"display","none",3,"change"],["fileInput",""],["fxLayout","row wrap","fxLayoutGap","15px"],[4,"ngFor","ngForOf"],["matChipRemove","",3,"click"],["mat-button","","class","btn-accept",3,"click",4,"ngIf"],["mat-button","",1,"btn-accept",3,"click"],["mat-button","",1,"btn-add-comment",3,"click"],["mat-button","",1,"btn-confirm",3,"disabled","click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,At,15,3,"div",1),t.TgZ(2,"div",2),t.YNc(3,Zt,2,1,"span",3),t.YNc(4,Mt,2,0,"button",4),t.YNc(5,It,2,0,"button",4),t.YNc(6,Pt,2,1,"button",5),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("ngIf",o.addComment),t.xp6(2),t.Q6J("appHasRole",t.VKq(5,Ot,o.Roles.Admin)),t.xp6(1),t.Q6J("ngIf",!o.addComment),t.xp6(1),t.Q6J("ngIf",o.addComment),t.xp6(1),t.Q6J("ngIf",o.addComment))},directives:[p.O5,_._Y,_.JL,d.xw,_.sg,f.KE,_.Fj,P.Nt,_.JJ,_.u,f.TO,x.lW,M.Hw,d.SQ,p.sg,v.qn,v.HS,v.qH,Z.c],styles:[".wrap[_ngcontent-%COMP%]{margin-bottom:2rem}.file-name[_ngcontent-%COMP%]{margin-left:1rem}.acceptance-btn-actions[_ngcontent-%COMP%]{padding-inline:1rem}.acceptance-btn-actions[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%]{color:#ebebeb;border-radius:10px}.acceptance-btn-actions[_ngcontent-%COMP%]   .btn-accept[_ngcontent-%COMP%], .acceptance-btn-actions[_ngcontent-%COMP%]   .btn-confirm[_ngcontent-%COMP%]{background-color:#31b965}.acceptance-btn-actions[_ngcontent-%COMP%]   .btn-confirm[disabled][_ngcontent-%COMP%]{background-color:#707070}.acceptance-btn-actions[_ngcontent-%COMP%]   .btn-add-comment[_ngcontent-%COMP%]{background-color:#db1c1c}  .mat-form-field-appearance-fill .mat-form-field-flex{border-radius:10px;border:1px solid gray}  .mat-chip{margin-bottom:15px!important}.file-input[_ngcontent-%COMP%]{margin-bottom:2rem}.file-input[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:7px}.file-input[_ngcontent-%COMP%]   .mat-button[_ngcontent-%COMP%]{margin-right:3rem}"]}),n})();function Qt(n,c){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"app-question",5),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("question",e.question)}}function qt(n,c){if(1&n&&(t.TgZ(0,"div"),t._UZ(1,"app-add-comment",6),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("questionId",e.questionId)("lineId",e.id)}}let Ft=(()=>{class n{constructor(e,o,i){this.activeRoute=e,this.quesationService=o,this.breadcrumbService=i}ngOnInit(){this.getIdFromUrl()}getIdFromUrl(){this.id=this.activeRoute.snapshot.paramMap.get("id"),this.questionId=this.activeRoute.snapshot.queryParamMap.get("quesation"),this.questionId&&this.getQuestionDetails()}getQuestionDetails(){this.quesationService.get(this.questionId).subscribe(e=>{this.question=e,this.breadcrumbService.set("@details",e.quesation)})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.gz),t.Y36(h.$),t.Y36(y.pm))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-details"]],decls:7,vars:3,consts:[["fxLayout","column",1,"container","wrap"],[1,"list-name"],["fxLayout","column","fxLayoutGap","10px",1,"question"],[4,"ngIf"],[3,"historyId"],[3,"question"],[3,"questionId","lineId"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"div",1),t.TgZ(2,"div",2),t.YNc(3,Qt,2,1,"div",3),t.TgZ(4,"div"),t._UZ(5,"app-acceptance-history",4),t.qZA(),t.YNc(6,qt,2,2,"div",3),t.qZA()()),2&e&&(t.xp6(3),t.Q6J("ngIf",o.question),t.xp6(2),t.Q6J("historyId",o.id),t.xp6(1),t.Q6J("ngIf",o.question))},directives:[d.xw,d.SQ,p.O5,F,xt,kt],styles:[""]}),n})();var Ht=a(9382),Jt=a(9965),Q=a(7994),b=a(9224);function Nt(n,c){if(1&n){const e=t.EpF();t.TgZ(0,"mat-card",10),t.NdJ("click",function(){const s=t.CHM(e).$implicit;return t.oxw().loadComponet(s.name)}),t.TgZ(1,"mat-card-subtitle"),t._uU(2),t.qZA(),t.TgZ(3,"mat-card-actions",11)(4,"button",12),t._uU(5),t.qZA()()()}if(2&n){const e=c.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(3),t.hij(" ",e.description," ")}}function St(n,c){}const Yt=[{path:"",component:(()=>{class n{constructor(e,o,i,s){this.activeRoute=e,this.projectService=o,this.breadcrumbService=i,this.injector=s,this.apiToGetListById={all:"GetProjectQuesationList",new:"GetProjectNewQuesations",rejected:"GetProjectRejectedQuesations",accepted:"GetProjectAcceptedQuesations",waitingReview:"GetProjectWaitingRevQuesations"},this.columns=[{columnDef:"id",header:"ID",cell:r=>`${r.id}`},{columnDef:"quesation",header:"Question",cell:r=>{var m,l;return(null===(m=r.quesation)||void 0===m?void 0:m.length)>35?(null===(l=r.quesation)||void 0===l?void 0:l.substring(0,35))+"...":(null==r?void 0:r.quesation)||"question TEMP"}},{columnDef:"description",header:"Description",cell:r=>{var m,l;return(null===(m=r.description)||void 0===m?void 0:m.length)>30?r.description.substring(0,30).replace(/<[^>]*>/g,"")+"...":(null===(l=r.description)||void 0===l?void 0:l.replace(/<[^>]*>/g,""))||"description TEMP"}},{columnDef:"category",header:"Category",cell:r=>`${r.category}`},{columnDef:"status",header:"Status",cell:r=>`${r.status}`}]}ngOnInit(){this.getIdFromUrl()}getIdFromUrl(){this.id=this.activeRoute.snapshot.paramMap.get("id"),this.id&&(this.getDetails(),this.getTolalSummaries(),this.componentId="all",this.loadComponet())}getDetails(){this.projectService.get(this.id).subscribe(e=>{this.projectCode=e.projectCode,this.description=e.description,this.breadcrumbService.set("@View",e.certificate+" - "+e.projectCode)})}getTolalSummaries(){this.projectService.getTotal(this.id).subscribe(e=>{this.prepareInfo(e)})}prepareInfo(e){this.info=[{name:"rejected",description:`${(null==e?void 0:e.rejectCout)||0} `},{name:"waitingReview",description:`${(null==e?void 0:e.underReviewCount)||0}`},{name:"accepted",description:`${(null==e?void 0:e.acceptCount)||0}`},{name:"new",description:`${(null==e?void 0:e.newCount)||0}`}]}loadComponet(e){if(this.componentId!==(null==e?void 0:e.toLowerCase()))switch(this.dynamicChild.clear(),e){case"waitingReview":this.componentId="waitingReview",this.loadQuestionsComponent(this.apiToGetListById.waitingReview);break;case"accepted":this.componentId="accepted",this.loadQuestionsComponent(this.apiToGetListById.accepted);break;case"rejected":this.componentId="rejected",this.loadQuestionsComponent(this.apiToGetListById.rejected);break;case"all":this.componentId="all",this.loadQuestionsComponent(this.apiToGetListById.all);break;case"new":this.componentId="new",this.loadQuestionsComponent(this.apiToGetListById.new);break;default:this.loadQuestionsComponent(this.apiToGetListById.rejected)}}loadQuestionsComponent(e){const o=t.zs3.create({providers:[{provide:h.$,useExisting:C.Y}],parent:this.injector}),i=this.dynamicChild.createComponent(Jt.H,{injector:o});i.instance.id=this.id,i.instance.routerName="project",i.instance.columns=this.columns,i.instance.apiToGetListById=e,i.instance.actionsBtn.push(Ht.B.actionButton.details),i.instance.hasSearch=!1,i.instance.rowClicked=!0}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(g.gz),t.Y36(C.Y),t.Y36(y.pm),t.Y36(t.zs3))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-view"]],viewQuery:function(e,o){if(1&e&&t.Gf(Q.$,7,t.s_b),2&e){let i;t.iGM(i=t.CRH())&&(o.dynamicChild=i.first)}},decls:12,vars:4,consts:[["fxLayout","column","fxLayoutAlign","start",1,"wrap"],[1,"header"],["fxLayout","column",1,"content"],[1,"title"],["fxLayout","row"],["fxFlex","60%"],["fxLayout","row wrap",1,"warp-card"],["class","card","fxFlex.sm","34%","fxFlex.xs","80%","fxLayout","column","fxLayoutAlign","space-between start",3,"click",4,"ngFor","ngForOf"],[3,"id"],["appLoader",""],["fxFlex.sm","34%","fxFlex.xs","80%","fxLayout","column","fxLayoutAlign","space-between start",1,"card",3,"click"],["fxLayout","row","fxLayoutAlign","space-between center"],["mat-button","",1,"disabled-btn"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p",3),t._uU(4),t.qZA(),t.TgZ(5,"div",4)(6,"span",5),t._uU(7),t.qZA()()()(),t.TgZ(8,"div",6),t.YNc(9,Nt,6,2,"mat-card",7),t.qZA(),t.TgZ(10,"div",8),t.YNc(11,St,0,0,"ng-template",9),t.qZA()()),2&e&&(t.xp6(4),t.Oqu(o.projectCode||"projectCode"),t.xp6(3),t.hij(" ",o.description||"description"," "),t.xp6(2),t.Q6J("ngForOf",o.info),t.xp6(1),t.Q6J("id",o.componentId))},directives:[d.xw,d.Wh,d.yH,p.sg,b.a8,b.$j,b.hq,x.lW,Q.$],styles:[".wrap[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background-color:#d6d6d6;margin-bottom:10px}.wrap[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]{width:90%;margin:auto;padding-block:2rem;padding-inline:1rem}.wrap[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700}.wrap[_ngcontent-%COMP%]   .warp-card[_ngcontent-%COMP%]{justify-content:center}.wrap[_ngcontent-%COMP%]   .warp-card[_ngcontent-%COMP%]   .mat-card[_ngcontent-%COMP%]{min-width:200px;border-radius:10px;background-color:#d6d6d6;color:#242424;margin:5px;width:max-content;padding:20px 10px;cursor:pointer}.wrap[_ngcontent-%COMP%]   .warp-card[_ngcontent-%COMP%]   .mat-card[_ngcontent-%COMP%]   .mat-card-actions[_ngcontent-%COMP%]{display:flex}.wrap[_ngcontent-%COMP%]   .warp-card[_ngcontent-%COMP%]   .mat-card[_ngcontent-%COMP%]   .mat-card-actions[_ngcontent-%COMP%]   .disabled-btn[_ngcontent-%COMP%]{cursor:text}.wrap[_ngcontent-%COMP%]   .warp-card[_ngcontent-%COMP%]   .mat-card[_ngcontent-%COMP%]   .mat-card-actions[_ngcontent-%COMP%]   .continue[_ngcontent-%COMP%]{background-color:#fff;border-radius:15px}"]}),n})()},{path:"details/:id",component:Ft,data:{breadcrumb:{alias:"details"}}}];let Lt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[g.Bz.forChild(Yt)],g.Bz]}),n})(),Dt=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[p.ez,Lt,q.m]]}),n})()}}]);